define(["backbone","text"],function(e){return e.Model.extend({defaults:{HEADER_TEXT:"The Insert Text Game!",DEFAULT_LANG:"en",WORDLISTS_DIRECTORY:"wordlists/",WORDLIST_EXTENSION:".txt",words:null,wordId:0,currentLetterId:0,score:0,lang:null},getCurrentWord:function(){return this.get("words")[this.get("wordId")]},validate:function(){},guessChar:function(e){return this.getCurrentWord()[this.get("currentLetterId")]!==e?!1:(this.set("currentLetterId",this.get("currentLetterId")+1),this.get("currentLetterId")>=this.getCurrentWord().length&&(this.deletePastWord(),this.pickWord()),!0)},deletePastWord:function(){this.get("words").pop(this.get("wordId"))},pickWord:function(){this.set("wordId",Math.floor(Math.random()*this.get("words").length)),this.set("currentLetterId",0)},getWordList:function(){var e=this;require(["text!"+this.get("WORDLISTS_DIRECTORY")+this.get("lang")+this.get("WORDLIST_EXTENSION")+"!strip"],function(t){e.set("words",t.trimLeft().trimRight().split(/\n+/)),e.pickWord()},function(){e.get("lang")===e.get("DEFAULT_LANG")?alert("Couldn't load the wordlist =(."):(e.set("lang",e.get("DEFAULT_LANG")),e.getWordList())})},initialize:function(){var e=0,t=null;t=navigator.language||navigator.userLanguage,e=t.indexOf("-"),e>0?this.set("lang",t.substr(0,e)):this.set("lang",t)}})});